!function(t){var e={};t.fn.railsAutocomplete=function(){var i=function(){this.railsAutoCompleter||(this.railsAutoCompleter=new t.railsAutocomplete(this))};return e[this.selector.replace("#","")]=arguments[0],void 0!==t.fn.on?$(document).on("focus",this.selector,i):this.live("focus",i)},t.railsAutocomplete=function(t){_e=t,this.init(_e)},t.railsAutocomplete.fn=t.railsAutocomplete.prototype={railsAutocomplete:"0.0.2"},t.railsAutocomplete.fn.extend=t.railsAutocomplete.extend=t.extend,t.railsAutocomplete.fn.extend({init:function(i){function a(t){return t.split(i.delimiter)}function n(t){return a(t).pop().replace(/^\s+/,"")}i.delimiter=t(i).attr("data-delimiter")||null,t(i).autocomplete($.extend({source:function(e,a){t.getJSON(t(i).attr("data-autocomplete"),{term:n(e.term)},function(){if(0==arguments[0].length){var e="No existing matches";void 0!==t(i).attr("data-autocomplete-label")&&(e=t(i).attr("data-autocomplete-label")),arguments[0]=[],arguments[0][0]={id:"",label:e}}t(arguments[0]).each(function(e,a){var n={};n[a.id]=a,t(i).data(n)}),a.apply(null,arguments)})},change:function(e,i){if(""!=t(t(this).attr("data-id-element")).val()){t(t(this).attr("data-id-element")).val(i.item?i.item.id:"");var a=!1;t(this).attr("data-update-elements")&&(a=t.parseJSON(t(this).attr("data-update-elements")));var n=i.item?t(this).data(i.item.id.toString()):{};if(!a||""!=t(a.id).val())for(var l in a)t(a[l]).val(i.item?n[l]:"")}},minLength:2,focus:function(){return!1},select:function(e,n){var l=a(this.value);if(l.pop(),""!=n.item.id&&l.push(n.item.value),null!=i.delimiter)l.push(""),this.value=l.join(i.delimiter);else if(this.value=l.join(""),t(this).attr("data-id-element")&&t(t(this).attr("data-id-element")).val(n.item.id),t(this).attr("data-update-elements")){var r=t(this).data(n.item.id.toString()),o=t.parseJSON(t(this).attr("data-update-elements"));for(var u in o)t(o[u]).val(r[u])}var s=this.value;return t(this).bind("keyup.clearId",function(){t(this).val().trim()!=s.trim()&&(t(t(this).attr("data-id-element")).val(""),t(this).unbind("keyup.clearId"))}),t(i).trigger("railsAutocomplete.select",n),!1}},e[i.id]))}}),t(document).ready(function(){t("input[data-autocomplete]").railsAutocomplete()})}(jQuery);